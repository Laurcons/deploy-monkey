# Deploy Monkey
Custom server-side tool to manage automated deployments on a shared virtual machine.

## How it works
For all my hosted projects I use the same DigitalOcean droplet instance, so that I can pay a fixed amount each month, while also being dirt cheap. This means that automated deployment solutions that can dynamically scale instances or that can manage creating/destroying instances will not work with my setup. Inspired by how the manual deployment process looks like (run some commands like `git pull` then `npm run start`), I figured that what I can do is have GitHub notify my webserver whenever a deployment is needed and let the droplet do the gruntwork.

This obviously has some drawbacks (compiling on the hosting instance shouldn't happen), but as proven by Deploy Monkey, a public API is all I need to make the idea work.

This REST API waits for webhook events generated by GitHub Actions, then looks up its database to find out what needs to be done serverside to process the deployment.

An example workflow can be seen in one of my uni projects, [here](https://github.com/cs-rustaceans/bucketlist-backend/blob/main/.github/workflows/deploy-dev.yml).

## Endpoints
### POST `/webhook/[service-name]/manual`
* Payload: nothing required, let the action provide whatever it wants
* Webhook signature is verified, as per [https://docs.github.com/webhooks/securing/](https://docs.github.com/webhooks/securing/)
